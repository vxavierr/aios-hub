# Story 2.1: Comando *list-projects

**Status:** Done
**Epic:** Epic 2 - Hub Commands
**Story ID:** HUB-2.1

---

## Executor Assignment

```yaml
executor: "@dev"
quality_gate: "@architect"
quality_gate_tools: [cli_validation, output_formatting, filter_implementation]
```

---

## Story

**As a** JoÃ£o (Hub Owner),
**I want** um comando para listar todos os projetos com seus status,
**So that** eu tenha visibilidade rÃ¡pida do meu workspace.

---

## Acceptance Criteria

1. Comando `*list-projects` adicionado ao AIOS Master
2. Lista mostra: nome, status, Ãºltima atividade, story/epic ativo
3. Suporta filtros: `--status active|paused|archived`
4. Output em tabela formatada

---

## ğŸ¤– CodeRabbit Integration

### Story Type Analysis

**Primary Type:** CLI
**Secondary Type(s):** API
**Complexity:** Low

### Specialized Agent Assignment

**Primary Agents:**
- @dev: Implementar comando

**Supporting Agents:**
- @architect: Validar integraÃ§Ã£o com AIOS Master

### Quality Gate Tasks

- [x] Pre-Commit (@dev): Testar output com diferentes filtros
- [ ] Pre-PR (@devops): N/A

### CodeRabbit Focus Areas

**Primary Focus:**
- CLI argument parsing
- Output formatting consistency
- Error handling for empty projects

**Secondary Focus:**
- Performance with many projects
- Cross-platform path display

---

## Tasks / Subtasks

- [x] Task 1: Adicionar comando ao AIOS Master (AC: #1)
  - [x] Editar `.aios-core/development/agents/aios-master.md`
  - [x] Adicionar comando `list-projects` na seÃ§Ã£o commands
  - [x] Definir visibility: [full, quick, key]

- [x] Task 2: Criar task handler para list-projects (AC: #2)
  - [x] Criar `.aios-core/development/tasks/hub-list-projects.md`
  - [x] Implementar leitura de `.aios/hub-context.json`
  - [x] Extrair: nome, status, lastActivity, activeStory, activeEpic

- [x] Task 3: Implementar filtros de status (AC: #3)
  - [x] Parse argument `--status`
  - [x] Filtrar resultados por status
  - [x] Validar valores: active, paused, archived

- [x] Task 4: Format output em tabela (AC: #4)
  - [x] Usar console.table ou formataÃ§Ã£o manual
  - [x] Colunas: Nome, Status, Ãšltima Atividade, Story, Epic
  - [x] Truncar timestamps para formato legÃ­vel

- [x] Task 5: Testar comando
  - [x] Testar sem projetos (mensagem informativa)
  - [x] Testar com filtros
  - [x] Testar output formatado

---

## Dev Notes

### Relevant Architecture

Do documento `docs/architecture/hub-multi-projeto-architecture.md`:

**Fonte de dados:** `.aios/hub-context.json`

```json
{
  "version": "1.0",
  "lastSync": "2026-02-19T10:30:00.000Z",
  "hubRoot": "D:\\workspace",
  "projects": {
    "projeto-alpha": {
      "status": "active",
      "lastActivity": "2026-02-19T10:30:00.000Z",
      "activeStory": "1.2",
      "activeEpic": "1"
    }
  },
  "summary": {
    "total": 1,
    "active": 1,
    "paused": 0,
    "archived": 0
  }
}
```

**Output esperado:**

```
ğŸ“ Hub Projects (3 total)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Name            â”‚ Status   â”‚ Last Activity       â”‚ Story â”‚ Epic â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ projeto-alpha   â”‚ active   â”‚ 2026-02-19 10:30    â”‚ 1.2   â”‚ 1    â”‚
â”‚ projeto-beta    â”‚ paused   â”‚ 2026-02-18 15:00    â”‚ 2.1   â”‚ 2    â”‚
â”‚ projeto-gamma   â”‚ archived â”‚ 2026-02-01 09:00    â”‚ -     â”‚ -    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

**Filtro por status:**
```
*list-projects --status active
```

### Dependencies

- `fs` para leitura de arquivos
- `hub-context.json` deve existir (criado por sync-projects.js)

### Testing

- Testar com hub-context.json vazio
- Testar com mÃºltiplos projetos
- Testar filtros invÃ¡lidos

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-19 | 1.0 | Story created | River (@sm) |

---

## Dev Agent Record

### Agent Model Used
Claude GLM-4 (glm-5)

### Debug Log References
N/A - ImplementaÃ§Ã£o sem erros

### Completion Notes
- Script implementado com formataÃ§Ã£o ASCII table manual
- Filtros de status funcionando corretamente
- Tratamento de erros para hub-context ausente e filtros invÃ¡lidos
- Output testado com 0 projetos e com filtros

### File List
**Created:**
- .aios-core/scripts/hub-list-projects.js
- .aios-core/development/tasks/hub-list-projects.md

**Modified:**
- .aios-core/development/agents/aios-master.md (commands + dependencies)
- docs/stories/2.1.list-projects-command.md (checkboxes, Dev Agent Record)

---

## QA Results

### Review Date: 2026-02-20
### Reviewer: Quinn (@qa)

### Acceptance Criteria Verification

| AC # | Description | Status | Notes |
|------|-------------|--------|-------|
| 1 | Comando `*list-projects` adicionado | âœ… PASS | Comando registrado em aios-master.md |
| 2 | Lista mostra nome, status, atividade, story/epic | âœ… PASS | Output testado com sucesso |
| 3 | Filtros `--status active|paused|archived` | âœ… PASS | Filtro testado com --status active |
| 4 | Output em tabela formatada | âœ… PASS | ASCII table bem formatada |

### Code Quality Review

| Aspect | Rating | Notes |
|--------|--------|-------|
| Error Handling | âœ… GOOD | Trata hub-context ausente, filtros invÃ¡lidos |
| Code Structure | âœ… GOOD | FunÃ§Ãµes bem separadas, modular |
| Output Quality | âœ… GOOD | FormataÃ§Ã£o ASCII legÃ­vel |
| Documentation | âœ… GOOD | JSDoc comments presentes |

### Test Results

```bash
$ node hub-list-projects.js
ğŸ“ Hub Projects (1 total)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ Name        â”‚ Status â”‚ Last Activity    â”‚ Story â”‚ Epic â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ teste-alpha â”‚ active â”‚ 19/02/2026 22:20 â”‚ -     â”‚ -    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

### Gate Decision: **PASS**

Todos os acceptance criteria foram atendidos. CÃ³digo bem estruturado com error handling adequado.

â€” Quinn, guardiÃ£o da qualidade ğŸ›¡ï¸
