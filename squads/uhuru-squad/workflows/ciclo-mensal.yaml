id: ciclo-mensal
name: "Ciclo Mensal Completo"
command: "*ciclo-mensal"
icon: "ğŸ”„"
description: "Pipeline de performance do mÃªs: anÃ¡lise â†’ insights â†’ relatÃ³rio â†’ prÃ³ximo ciclo"
squad: uhuru-squad

inputs:
  - name: cliente
    description: "CÃ³digo do cliente (ou 'all' para todos)"
    required: true
  - name: mes
    description: "MÃªs de referÃªncia (ex: jan/2026)"
    required: true

steps:
  - id: extracao
    name: "ExtraÃ§Ã£o de dados"
    agent: nova
    task: tasks/nova/extrair.md
    command: "*extrair {cliente} all"
    description: "Puxar dados completos do mÃªs de todas as plataformas"
    output: "dados_extraidos"

  - id: analise
    name: "Big Numbers & AnÃ¡lise de Campanhas"
    agent: nova
    task: tasks/nova/analisar.md
    command: "*analisar {cliente} {mes}"
    depends_on: [extracao]
    description: "Big Numbers completo + anÃ¡lise profunda de campanhas"
    output: "big_numbers"

  - id: leads
    name: "AnÃ¡lise de Leads"
    agent: nova
    task: tasks/nova/leads.md
    command: "*leads {cliente}"
    depends_on: [extracao]
    description: "AnÃ¡lise de qualidade e volume de leads do mÃªs"
    output: "analise_leads"

  - id: insights
    name: "Compilar Insights"
    agent: sage
    task: tasks/sage/insights.md
    command: "*insights {cliente} {mes}"
    depends_on: [analise, leads]
    description: "Transformar dados em aprendizados e recomendaÃ§Ãµes"
    output: "insights"

  - id: forecast
    name: "Forecast & Fechamento"
    agent: finn
    task: tasks/finn/forecast.md
    command: "*forecast {cliente} {mes}"
    depends_on: [analise]
    description: "Fechar budget do mÃªs e projetar o prÃ³ximo"
    output: "forecast"

  - id: planejamento
    name: "Plano de MÃ­dia"
    agent: flux
    task: tasks/flux/planejar.md
    command: "*planejar {cliente} {proximo_mes}"
    depends_on: [insights, forecast]
    description: "Definir plano de mÃ­dia do prÃ³ximo mÃªs com base nos insights"
    output: "plano_midia"

  - id: relatorio
    name: "RelatÃ³rio de Resultados"
    agent: sage
    task: tasks/sage/relatorio.md
    command: "*relatorio {cliente} {mes}"
    depends_on: [insights, planejamento]
    description: "Gerar relatÃ³rio completo do mÃªs"
    output: "relatorio"

  - id: apresentacao
    name: "ApresentaÃ§Ã£o ao Cliente"
    agent: sage
    task: tasks/sage/apresentar.md
    command: "*apresentar {cliente}"
    depends_on: [relatorio]
    description: "Preparar e realizar apresentaÃ§Ã£o mensal ao cliente"
    output: "apresentacao"

flow_diagram: |
  @nova *extrair
       â†“
  @nova *analisar + *leads (paralelo)
       â†“
  @sage *insights + @finn *forecast (paralelo)
       â†“
  @flux *planejar
       â†“
  @sage *relatorio
       â†“
  @sage *apresentar
