# Story CL2-002: Tim Mind - Extraction Specialist

**Story ID:** CL2-002
**Epic:** EPIC-CLONE-LAB-V2
**Phase:** 1 - Foundation
**Status:** Ready
**Points:** 5
**Author:** Morgan (PM)

---

## Description

Implementar a primeira Mind: **Tim**, especialista em extração e curadoria de fontes. Inspirado em Tim Ferriss, esta mind foca em identificar as melhores fontes de informação e garantir qualidade dos dados extraídos.

### Persona

```yaml
id: tim
name: Tim
inspiration: Tim Ferriss
expertise:
  - Source quality assessment
  - Content curation
  - Data extraction optimization
  - Efficiency in information gathering
tone: pragmatic
```

---

## Acceptance Criteria

```gherkin
Given extracted data from multiple sources
When Tim mind analyzes the data
Then it should assess source quality and relevance

Given sources with varying quality
When Tim mind processes them
Then it should prioritize high-quality sources

Given duplicate or redundant content
When Tim mind analyzes
Then it should identify and flag duplicates

Given the analysis is complete
When Tim mind returns results
Then it should include confidence scores per source
```

---

## Technical Requirements

### Implementation

```typescript
// packages/minds/src/tim/extraction-mind.ts

import { IMind, MindContext, MindResult, MindPersona } from '../base';

export class TimMind implements IMind {
  readonly persona: MindPersona = {
    id: 'tim',
    name: 'Tim',
    inspiration: 'Tim Ferriss',
    expertise: [
      'Source quality assessment',
      'Content curation',
      'Data extraction optimization',
      'Efficiency in information gathering'
    ],
    tone: 'pragmatic'
  };

  async analyze(context: MindContext): Promise<MindResult> {
    // 1. Assess source quality
    const sourceQuality = await this.assessSourceQuality(context.extractedData);

    // 2. Identify duplicates
    const duplicates = await this.detectDuplicates(context.extractedData);

    // 3. Calculate content coverage
    const coverage = await this.calculateCoverage(context.extractedData);

    // 4. Generate recommendations
    const recommendations = this.generateRecommendations(
      sourceQuality,
      duplicates,
      coverage
    );

    return {
      mindId: 'tim',
      traits: this.buildTraits(sourceQuality, coverage),
      confidence: this.calculateOverallConfidence(sourceQuality),
      evidence: this.collectEvidence(context.extractedData),
      recommendations,
      metadata: {
        sourcesAnalyzed: context.extractedData.length,
        duplicateGroups: duplicates.length,
        coverageScore: coverage.score
      }
    };
  }

  async validate(result: MindResult): Promise<ValidationResult> {
    // Validate extraction results
  }

  canHandle(context: MindContext): boolean {
    return context.extractedData.length > 0;
  }

  getDependencies(): MindId[] {
    return []; // Tim has no dependencies - is the first mind
  }

  // Private methods...
  private async assessSourceQuality(data: ExtractedData[]): Promise<SourceQuality[]> {}
  private async detectDuplicates(data: ExtractedData[]): Promise<DuplicateGroup[]> {}
  private async calculateCoverage(data: ExtractedData[]): Promise<CoverageResult> {}
}
```

### Analysis Dimensions

| Dimension | Description | Output |
|-----------|-------------|--------|
| **Source Quality** | Credibility, recency, depth | Quality score 0-100 |
| **Coverage** | Breadth of topics covered | Coverage percentage |
| **Redundancy** | Duplicate content detection | Duplicate groups |
| **Temporal Spread** | Distribution over time | Date range histogram |
| **Format Diversity** | Mix of content types | Type distribution |

---

## Business Value

Tim é a **primeira mind** do pipeline e responsável por garantir qualidade dos dados de entrada. Fontes de baixa qualidade resultam em clones de baixa fidelidade.

**Benefícios:**
- Reduz lixo de dados no pipeline (duplicatas, fontes ruins)
- Aumenta confiança nas análises das outras 7 minds
- Economiza tokens de LLM filtrando conteúdo redundante
- Estabelece padrão de implementação para as outras 7 minds

---

## Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| LLM inconsistência na avaliação | Medium | Medium | Prompts estruturados + validação |
| Falso positivo em duplicatas | Low | Medium | Threshold configurável |
| Performance com muitos sources | Medium | Low | Processamento em batches |

---

## Scope

### In Scope
- TimMind class implementation
- Source quality assessment
- Duplicate detection
- Coverage analysis
- Recommendation generation
- Unit tests

### Out of Scope
- Orchestrator integration
- Other minds
- CLI commands

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| CL2-001 (IMind Interface) | Package | Pending |
| @clone-lab/extractors types | Package | Available |

---

## Dev Notes

### Prompt Template for Analysis

```
You are Tim, an extraction specialist inspired by Tim Ferriss.
Your expertise is in identifying high-quality sources and curating content efficiently.

Analyze the following extracted data and assess:
1. Source quality (credibility, recency, depth)
2. Content coverage (what topics are well covered, what's missing)
3. Redundancy (duplicate or very similar content)
4. Recommendations for improving the source collection

Data:
{extractedData}

Respond in JSON format with your analysis.
```

---

## File List

| File | Action | Status |
|------|--------|--------|
| `packages/minds/src/tim/extraction-mind.ts` | Create | Pending |
| `packages/minds/src/tim/prompts.ts` | Create | Pending |
| `packages/minds/src/tim/types.ts` | Create | Pending |
| `packages/minds/src/tim/index.ts` | Create | Pending |
| `packages/minds/src/tim/__tests__/extraction-mind.test.ts` | Create | Pending |

---

## Definition of Done

- [ ] Implements IMind interface correctly
- [ ] Returns valid MindResult
- [ ] Confidence scores are reasonable (0-100)
- [ ] Recommendations are actionable
- [ ] Unit tests pass (coverage > 80%)
- [ ] Handles empty input gracefully
- [ ] Handles edge cases (1 source, 1000+ sources)
- [ ] Lint passa sem erros
- [ ] Code review aprovado

---

## QA Checklist

- [ ] Implements IMind interface correctly
- [ ] Returns valid MindResult
- [ ] Confidence scores are reasonable (0-100)
- [ ] Recommendations are actionable
- [ ] Unit tests pass
- [ ] Handles empty input gracefully

---

## Change Log

| Date | Author | Description |
|------|--------|-------------|
| 2026-02-20 | Morgan (PM) | Story created |

---

*Story generated by Morgan (PM Agent) - AIOS Framework*
