# Story CL2-028: Meta-Cognition Package Setup

**Story ID:** CL2-028
**Epic:** EPIC-CLONE-LAB-V2
**Phase:** 3 - Meta-Cognition
**Status:** Ready
**Points:** 2
**Author:** Morgan (PM)

---

## Description

Criar a estrutura base do package `@clone-lab/meta` que conterá todos os componentes de meta-cognição: auto-avaliação, constitution, auto-improvement, e evolution tracking.

### Problem Statement
O Clone Lab v2.0 precisa de um package dedicado para funcionalidades de meta-cognição. Este package deve ser criado antes das implementações específicas, estabelecendo interfaces base, tipos compartilhados, e estrutura de módulos.

---

## Acceptance Criteria

```gherkin
Given I am developing a meta-cognition component
When I import from @clone-lab/meta
Then I have access to all base types and interfaces

Given the meta package is initialized
When other packages depend on it
Then they can import metrics, assessment, and constitution types

Given the package structure is defined
When developers add new meta components
Then there is a clear pattern to follow
```

---

## Technical Requirements

### Package Structure

```
packages/meta/
├── src/
│   ├── metrics/
│   │   └── types.ts
│   ├── assessment/
│   │   └── types.ts
│   ├── constitution/
│   │   └── types.ts
│   ├── auto-improve/
│   │   └── types.ts
│   ├── evolution/
│   │   └── types.ts
│   ├── index.ts              # Main exports
│   └── config.ts             # Meta-cognition config
├── package.json
├── tsconfig.json
└── README.md
```

### Base Types

```typescript
// packages/meta/src/index.ts

// Metrics types
export interface MetricData {
  name: string;
  value: number;
  timestamp: Date;
  tags: Record<string, string>;
}

export interface MetricSeries {
  name: string;
  data: MetricData[];
  aggregation: 'sum' | 'avg' | 'max' | 'min';
}

// Assessment types
export interface AssessmentScore {
  category: string;
  score: number;          // 0-100
  trend: 'improving' | 'stable' | 'declining';
  details: Record<string, unknown>;
}

// Constitution types
export interface ConstitutionRule {
  id: string;
  name: string;
  description: string;
  severity: 'must' | 'should' | 'may';
  check: (candidate: unknown) => boolean;
}

// Auto-improvement types
export interface ImprovementCandidate {
  id: string;
  category: 'add' | 'remove' | 'modify' | 'optimize';
  target: string;
  reason: string;
  impact: 'low' | 'medium' | 'high';
  autoApplicable: boolean;
  riskLevel: number;      // 0-100
}

// Evolution types
export interface EvolutionEvent {
  id: string;
  type: 'change' | 'rollback' | 'measurement' | 'review';
  timestamp: Date;
  data: Record<string, unknown>;
}
```

### Package Configuration

```json
// packages/meta/package.json
{
  "name": "@clone-lab/meta",
  "version": "0.1.0",
  "description": "Meta-cognition layer for Clone Lab self-evolution",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "tsc",
    "test": "jest",
    "lint": "eslint src/"
  },
  "dependencies": {
    "@clone-lab/core": "workspace:*"
  },
  "devDependencies": {
    "typescript": "^5.0.0",
    "jest": "^29.0.0"
  }
}
```

---

## Business Value

Esta story estabelece a **fundação técnica** para todo o sistema de meta-cognição. Sem uma estrutura base, os componentes individuais seriam implementados de forma inconsistente.

**Benefícios:**
- Padronização de tipos de métricas e avaliação
- Estrutura clara para desenvolvedores
- Habilita desenvolvimento paralelo dos componentes
- Facilita testes com mocks padronizados

---

## Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Tipos muito genéricos | Medium | Medium | Refinar em stories subsequentes |
| Dependências circulares | Low | High | Definir limites claros entre módulos |
| Breaking changes futuros | Low | Medium | Versionamento desde início |

---

## Scope

### In Scope
- Package structure creation
- Base types for all meta components
- Configuration exports
- Package.json and tsconfig.json

### Out of Scope
- Actual metric collection (CL2-029)
- Assessment engine (CL2-030)
- Constitution implementation (CL2-034)
- Auto-improvement (CL2-036)

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| @clone-lab/core | Package | Available |
| TypeScript 5.x | Runtime | Available |

---

## Dev Notes

- Use barrel exports for clean imports
- Consider future distributed execution in type design
- Add Zod schemas for runtime validation in future stories

---

## File List

| File | Action | Status |
|------|--------|--------|
| `packages/meta/package.json` | Create | Pending |
| `packages/meta/tsconfig.json` | Create | Pending |
| `packages/meta/src/index.ts` | Create | Pending |
| `packages/meta/src/config.ts` | Create | Pending |
| `packages/meta/src/metrics/types.ts` | Create | Pending |
| `packages/meta/src/assessment/types.ts` | Create | Pending |
| `packages/meta/src/constitution/types.ts` | Create | Pending |
| `packages/meta/src/auto-improve/types.ts` | Create | Pending |
| `packages/meta/src/evolution/types.ts` | Create | Pending |

---

## Definition of Done

- [ ] Package builds successfully (`pnpm build`)
- [ ] All types exported correctly
- [ ] Types usable from other packages
- [ ] JSDoc documentation complete
- [ ] Lint passa sem erros
- [ ] Code review aprovado

---

## QA Checklist

- [ ] Package builds successfully
- [ ] All types exported correctly
- [ ] Types usable from other packages
- [ ] JSDoc documentation complete

---

## Change Log

| Date | Author | Description |
|------|--------|-------------|
| 2026-02-20 | Morgan (PM) | Story created |

---

*Story generated by Morgan (PM Agent) - AIOS Framework*
