# Story CL2-060: Evolution Dashboard (CLI)

**Story ID:** CL2-060
**Epic:** EPIC-CLONE-LAB-V2
**Phase:** 5 - Self-Evolution
**Status:** Ready
**Points:** 8
**Author:** Morgan (PM)

---

## Description

Implementar o **Evolution Dashboard CLI** - interface de linha de comando para visualizar e interagir com o sistema de auto-evolução, incluindo histórico, métricas e gestão de aprovações.

---

## Acceptance Criteria

```gherkin
Given the user runs "clone-lab evolution status"
When the command executes
Then current evolution status is displayed

Given the user runs "clone-lab evolution history"
When the command executes
Then list of all changes is shown

Given there are pending approvals
When the user runs "clone-lab evolution pending"
Then all pending items are listed

Given the user runs "clone-lab evolution approve <id>"
When the approval is processed
Then the item is approved and queued for application
```

---

## Technical Requirements

### CLI Commands Structure

```typescript
// packages/cli/src/commands/evolution/index.ts

export const evolutionCommands = new Command('evolution')
  .description('Manage system self-evolution')
  .addCommand(statusCommand)
  .addCommand(historyCommand)
  .addCommand(pendingCommand)
  .addCommand(approveCommand)
  .addCommand(rejectCommand)
  .addCommand(rollbackCommand)
  .addCommand(reportCommand);
```

### Status Command

```typescript
export const statusCommand = new Command('status')
  .description('Show current evolution system status')
  .option('-j, --json', 'Output as JSON')
  .action(async (options) => {
    const status = await getEvolutionStatus();

    if (options.json) {
      console.log(JSON.stringify(status, null, 2));
      return;
    }

    console.log('\n=== Clone Lab Evolution Status ===\n');
    console.log(`Scheduler: ${status.scheduler.running ? 'Running' : 'Stopped'}`);
    console.log(`Changes Today: ${status.rateLimits.today}/${status.rateLimits.maxPerDay}`);
    console.log(`Pending Approvals: ${status.pendingApprovals.count}`);
    console.log(`Success Rate (7d): ${(status.recentChanges.successRate * 100).toFixed(1)}%`);
    console.log(`Learning Patterns: ${status.learning.totalPatterns}`);
  });
```

---

## Business Value

Dashboard CLI fornece visibilidade e controle sobre o sistema de auto-evolução.

**Benefícios:** Visibilidade completa, gestão de aprovações, rollback simplificado

---

## Scope

### In Scope
- All CLI commands (status, history, pending, approve, reject, rollback, report)
- Formatted output, filtering, pagination

### Out of Scope
- Web UI, real-time updates

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| CL2-041 (Evolution Log) | Package | Pending |
| CL2-056 (Human Approval) | Package | Pending |
| Commander.js | Package | Available |

---

## File List

| File | Action | Status |
|------|--------|--------|
| `packages/cli/src/commands/evolution/index.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/status.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/history.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/pending.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/approve.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/rollback.ts` | Create | Pending |
| `packages/cli/src/commands/evolution/report.ts` | Create | Pending |

---

## Definition of Done

- [ ] All commands work correctly
- [ ] Output formatted and readable
- [ ] Error handling comprehensive
- [ ] Lint passa sem erros
- [ ] Code review aprovado

---

*Story generated by Morgan (PM Agent) - AIOS Framework*
