# Story CL2-014: Behavioral Tasks BH-001 to BH-012

**Story ID:** CL2-014
**Epic:** EPIC-CLONE-LAB-V2
**Phase:** 2 - Validation
**Status:** Ready
**Points:** 8
**Author:** Morgan (PM)

---

## Description

Implementar as 12 Validation Tasks Comportamentais (BH-001 a BH-012), responsaveis por validar padroes comportamentais, habitos e tendencias de acao da personalidade sendo clonada.

### Problem Statement
A analise comportamental eh fundamental para capturar como a pessoa age, reage e interage. Estas 12 tasks validam se os padroes comportamentais foram adequadamente identificados e representados.

---

## Acceptance Criteria

```gherkin
Given behavioral data from extracted sources
When behavioral tasks are executed
Then all 12 tasks return valid TaskResults

Given content with decision-making patterns
When BH-001 (Decision Patterns) runs
Then it identifies and validates decision-making styles

Given content with communication patterns
When BH-005 (Communication Style) runs
Then it validates communication characteristics

Given content with risk-taking behavior
When BH-007 (Risk Tolerance) runs
Then it assesses risk tolerance levels
```

---

## Technical Requirements

### Task Definitions

| Task ID | Name | Description |
|---------|------|-------------|
| BH-001 | Decision Patterns | Valida padroes de tomada de decisao |
| BH-002 | Response Patterns | Valida padroes de resposta a situacoes |
| BH-003 | Habit Consistency | Verifica consistencia de habitos declarados |
| BH-004 | Routine Analysis | Analisa rotinas e padroes diarios |
| BH-005 | Communication Style | Valida estilo de comunicacao |
| BH-006 | Stress Response | Valida respostas a estresse/pressao |
| BH-007 | Risk Tolerance | Avalia tolerancia a risco |
| BH-008 | Social Interaction | Valida padroes de interacao social |
| BH-009 | Problem Solving | Valida abordagem de resolucao de problemas |
| BH-010 | Learning Style | Valida estilo de aprendizado |
| BH-011 | Goal Setting | Valida padroes de definicao de metas |
| BH-012 | Feedback Response | Valida como recebe e responde a feedback |

### Implementation Example

```typescript
// packages/validation/src/tasks/behavioral/bh-001-decision-patterns.ts

import { IValidationTask, TaskContext, TaskResult, TaskDefinition } from '../task.interface';

export class BH001DecisionPatterns implements IValidationTask {
  readonly definition: TaskDefinition = {
    id: 'BH-001',
    category: 'behavioral',
    name: 'Decision Patterns',
    description: 'Validates decision-making patterns and styles',
    requiredInputs: ['extractedData', 'mindResults'],
    outputs: ['decisionStyle', 'confidence', 'evidence'],
    timeout: 45000,
    retryable: true,
    priority: 'high'
  };

  async execute(context: TaskContext): Promise<TaskResult> {
    const startTime = Date.now();
    const findings: TaskFinding[] = [];

    // Get Daniel Mind results if available
    const danielResult = context.previousResults.get('BH-000'); // Or from Mind

    const decisionPatterns = await this.analyzeDecisionPatterns(context.extractedData);

    if (decisionPatterns.patterns.length < 3) {
      findings.push({
        type: 'warning',
        description: 'Insufficient decision examples for reliable pattern analysis',
        severity: 'medium'
      });
    }

    const score = this.calculateScore(decisionPatterns);

    return {
      taskId: this.definition.id,
      status: score >= 50 ? 'passed' : 'failed',
      score,
      confidence: decisionPatterns.confidence,
      findings,
      recommendations: this.generateRecommendations(decisionPatterns),
      executionTime: Date.now() - startTime,
      metadata: {
        patternsFound: decisionPatterns.patterns.length,
        dominantStyle: decisionPatterns.dominantStyle
      }
    };
  }

  private async analyzeDecisionPatterns(data: ExtractedData[]): Promise<DecisionAnalysis> {
    // Analyze content for decision-making patterns
    const patterns: DecisionPattern[] = [];

    for (const item of data) {
      const extracted = this.extractDecisions(item.content);
      patterns.push(...extracted);
    }

    return {
      patterns,
      dominantStyle: this.identifyDominantStyle(patterns),
      confidence: this.calculatePatternConfidence(patterns)
    };
  }

  private calculateScore(analysis: DecisionAnalysis): number {
    let score = 0;

    // Number of patterns found
    score += Math.min(30, analysis.patterns.length * 5);

    // Consistency of patterns
    score += analysis.confidence * 40;

    // Coverage of decision types
    score += this.calculateTypeCoverage(analysis.patterns) * 30;

    return Math.min(100, score);
  }

  async validateInputs(context: TaskContext): Promise<boolean> {
    return context.extractedData.length > 0;
  }

  canExecute(context: TaskContext): boolean {
    return context.extractedData.length > 0;
  }

  getDependencies(): TaskId[] {
    return ['EX-001', 'EX-003']; // Depends on source completeness and relevance
  }
}
```

### File Structure

```
packages/validation/src/tasks/behavioral/
├── bh-001-decision-patterns.ts
├── bh-002-response-patterns.ts
├── bh-003-habit-consistency.ts
├── bh-004-routine-analysis.ts
├── bh-005-communication-style.ts
├── bh-006-stress-response.ts
├── bh-007-risk-tolerance.ts
├── bh-008-social-interaction.ts
├── bh-009-problem-solving.ts
├── bh-010-learning-style.ts
├── bh-011-goal-setting.ts
├── bh-012-feedback-response.ts
├── index.ts
└── __tests__/
    └── behavioral-tasks.test.ts
```

---

## Business Value

As Behavioral Tasks capturam **como a pessoa age**, que eh fundamental para criar um clone convincente que replica comportamentos autenticos.

**Beneficios:**
- Validacao profunda de padroes comportamentais
- Aumenta autenticidade do clone
- Identifica inconsistencias comportamentais
- Fornece insights para prompts comportamentais

---

## Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Subjetividade na analise | High | Medium | Prompts estruturados + validacao cruzada |
| Dados insuficientes | Medium | High | Thresholds de confianca |
| Variabilidade contextual | Medium | Medium | Considerar contexto nas tasks |

---

## Scope

### In Scope
- All 12 behavioral task implementations
- Unit tests for each task
- Decision pattern analysis logic
- Finding and recommendation generation

### Out of Scope
- Other task categories
- Task Registry & Executor
- CLI integration

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| CL2-012 (Task Interface) | Package | Pending |
| CL2-013 (Extraction Tasks) | Package | Pending |
| @clone-lab/minds (Daniel) | Package | Pending |

---

## Dev Notes

- Use NLP for pattern extraction when possible
- Consider sentiment analysis for emotional patterns
- Implement confidence scoring based on sample size
- Add behavioral taxonomy for classification

---

## File List

| File | Action | Status |
|------|--------|--------|
| `packages/validation/src/tasks/behavioral/bh-001-decision-patterns.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-002-response-patterns.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-003-habit-consistency.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-004-routine-analysis.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-005-communication-style.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-006-stress-response.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-007-risk-tolerance.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-008-social-interaction.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-009-problem-solving.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-010-learning-style.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-011-goal-setting.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/bh-012-feedback-response.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/index.ts` | Create | Pending |
| `packages/validation/src/tasks/behavioral/__tests__/behavioral-tasks.test.ts` | Create | Pending |

---

## Definition of Done

- [ ] All 12 tasks implement IValidationTask correctly
- [ ] Each task returns valid TaskResult
- [ ] Behavioral patterns are accurately identified
- [ ] Findings are descriptive and actionable
- [ ] Unit tests pass (coverage > 80%)
- [ ] Handles edge cases gracefully
- [ ] Lint passa sem erros
- [ ] Code review aprovado

---

## QA Checklist

- [ ] All 12 tasks execute without errors
- [ ] Task results are consistent
- [ ] Patterns are accurately detected
- [ ] Confidence scores are reasonable
- [ ] Edge cases handled

---

## Change Log

| Date | Author | Description |
|------|--------|-------------|
| 2026-02-20 | Morgan (PM) | Story created |

---

*Story generated by Morgan (PM Agent) - AIOS Framework*
