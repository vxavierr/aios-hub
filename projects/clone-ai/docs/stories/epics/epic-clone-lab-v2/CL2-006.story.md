# Story CL2-006: Charlie Mind - Synthesis & Paradoxes

**Story ID:** CL2-006
**Epic:** EPIC-CLONE-LAB-V2
**Phase:** 1 - Foundation
**Status:** Ready
**Points:** 5
**Author:** Morgan (PM)

---

## Description

Implementar a **Charlie Mind**, especialista em síntese e identificação de paradoxos. Inspirado em Charlie Munger, esta mind integra resultados das outras minds, identifica contradições e cria um quadro coeso da personalidade.

### Persona

```yaml
id: charlie
name: Charlie
inspiration: Charlie Munger
expertise:
  - Cross-domain synthesis
  - Paradox identification
  - Mental model integration
  - Wisdom distillation
tone: pragmatic
```

---

## Acceptance Criteria

```gherkin
Given results from Daniel, Brene, and Barbara minds
When Charlie mind synthesizes
Then it should create an integrated personality profile

Given contradictory traits across minds
When Charlie mind analyzes
Then it should identify and explain paradoxes

Given multiple perspectives on same trait
When Charlie mind processes
Then it should reconcile or highlight tension

Given the synthesis is complete
When Charlie mind returns results
Then it should include integrated insights with confidence
```

---

## Technical Requirements

### Implementation

```typescript
// packages/minds/src/charlie/synthesis-mind.ts

import { IMind, MindContext, MindResult, MindPersona } from '../base';

export class CharlieMind implements IMind {
  readonly persona: MindPersona = {
    id: 'charlie',
    name: 'Charlie',
    inspiration: 'Charlie Munger',
    expertise: [
      'Cross-domain synthesis',
      'Paradox identification',
      'Mental model integration',
      'Wisdom distillation'
    ],
    tone: 'pragmatic'
  };

  async analyze(context: MindContext): Promise<MindResult> {
    // 1. Collect results from all dependent minds
    const timResults = context.previousResults?.get('tim');
    const danielResults = context.previousResults?.get('daniel');
    const breneResults = context.previousResults?.get('brene');
    const barbaraResults = context.previousResults?.get('barbara');

    // 2. Identify paradoxes and contradictions
    const paradoxes = await this.identifyParadoxes([
      danielResults,
      breneResults,
      barbaraResults
    ]);

    // 3. Synthesize integrated traits
    const synthesis = await this.synthesizeTraits([
      danielResults,
      breneResults,
      barbaraResults
    ]);

    // 4. Build integrated profile
    const profile = this.buildIntegratedProfile(synthesis, paradoxes);

    return {
      mindId: 'charlie',
      traits: profile.traits,
      confidence: profile.confidence,
      evidence: profile.evidence,
      recommendations: profile.recommendations,
      metadata: {
        paradoxesIdentified: paradoxes.length,
        traitsIntegrated: synthesis.length,
        coherenceScore: profile.coherence
      }
    };
  }

  async validate(result: MindResult): Promise<ValidationResult> {
    // Validate synthesis results
  }

  canHandle(context: MindContext): boolean {
    // Needs results from Daniel, Brene, and Barbara
    const hasDaniel = context.previousResults?.has('daniel');
    const hasBrene = context.previousResults?.has('brene');
    const hasBarbara = context.previousResults?.has('barbara');
    return !!(hasDaniel && hasBrene && hasBarbara);
  }

  getDependencies(): MindId[] {
    return ['daniel', 'brene', 'barbara'];
  }

  // Private methods...
  private async identifyParadoxes(results: MindResult[]): Promise<Paradox[]> {}
  private async synthesizeTraits(results: MindResult[]): Promise<SynthesizedTrait[]> {}
}
```

### Analysis Dimensions

| Dimension | Description | Output |
|-----------|-------------|--------|
| **Trait Synthesis** | Combined view of traits | Integrated trait list |
| **Paradox Detection** | Contradictions found | Paradox list with explanation |
| **Coherence Score** | How consistent the profile is | 0-100 score |
| **Wisdom Patterns** | Recurring insights | Key wisdom points |
| **Integration Quality** | Quality of synthesis | Quality assessment |

---

## Business Value

Charlie é a **mind de síntese** - integra todas as análises anteriores em um quadro coeso. Sem Charlie, teríamos análises fragmentadas sem uma visão unificada.

**Benefícios:**
- Cria visão unificada da personalidade
- Identifica contradições para investigação
- Sintetiza insights de múltiplas perspectivas
- Aumenta coerência do clone final

---

## Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Síntese perde nuance | Medium | Medium | Preservar evidências originais |
| Paradoxos mal explicados | Medium | Medium | LLM explicação + validação |
| Dependência de 3 minds | Low | High | Timeout + fallback parcial |

---

## Scope

### In Scope
- CharlieMind class implementation
- Paradox identification
- Trait synthesis
- Coherence scoring
- Unit tests

### Out of Scope
- Orchestrator integration
- Other minds
- CLI commands

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| CL2-001 (IMind Interface) | Package | Ready |
| CL2-003 (Daniel Mind) | Package | Pending |
| CL2-004 (Brene Mind) | Package | Pending |
| CL2-005 (Barbara Mind) | Package | Pending |

---

## Dev Notes

### Synthesis Strategy

```typescript
// Weight traits by confidence and evidence count
// Prioritize traits that appear across multiple minds
// Flag traits that appear in only one mind for review
```

---

## File List

| File | Action | Status |
|------|--------|--------|
| `packages/minds/src/charlie/synthesis-mind.ts` | Create | Pending |
| `packages/minds/src/charlie/prompts.ts` | Create | Pending |
| `packages/minds/src/charlie/types.ts` | Create | Pending |
| `packages/minds/src/charlie/index.ts` | Create | Pending |
| `packages/minds/src/charlie/__tests__/synthesis-mind.test.ts` | Create | Pending |

---

## Definition of Done

- [ ] Implements IMind interface correctly
- [ ] Returns valid MindResult
- [ ] Integrates results from Daniel, Brene, Barbara
- [ ] Identifies paradoxes correctly
- [ ] Coherence scoring works
- [ ] Unit tests pass (coverage > 80%)
- [ ] Handles edge cases gracefully
- [ ] Lint passa sem erros
- [ ] Code review aprovado

---

## QA Checklist

- [ ] Implements IMind interface correctly
- [ ] Returns valid MindResult
- [ ] Synthesis integrates all inputs
- [ ] Paradoxes identified when present
- [ ] Coherence score reasonable

---

## Change Log

| Date | Author | Description |
|------|--------|-------------|
| 2026-02-20 | Morgan (PM) | Story created |

---

*Story generated by Morgan (PM Agent) - AIOS Framework*
